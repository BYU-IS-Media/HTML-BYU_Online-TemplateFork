var byu_calendar=(function(b){b(function(){var e=b("#calendarDays");var c=new Date();var d=new Date();d.setDate(c.getDate()+2);e.children("h3").html(c.format("dddd, mmmm d"));b.ajax({url:"http://unicomm.byu.edu/calendartest/Webservice/v1/",data:{startDate:c.format("m/d/yyyy"),endDate:d.format("m/d/yyyy")},dataType:"jsonp",timeout:5000}).success(function(j){var i="";var h=null;for(var f in j){var g=a(j[f].Start);if(h==null||g.toDateString()!=h.toDateString()){if(f>8){break}if(h!=null){i+="</div>"}i+='<div class="day"><h3><span class="date">'+g.format("d")+"</span>"+g.format("mmm, dddd")+"</h3>"}i+='<a href="http://calendar.byu.edu/calendar/'+g.format("yyyy-mm-dd")+'">'+j[f].Title+'</a><span class="time">'+((j[f].AllDay)?"All Day":g.format("h:MM tt"))+"</span>";h=g}b(i+"</div>").insertAfter(e)}).error(function(f){var g=f.statusText;if(g=="timeout"){alert("Sorry, your request has timed out, please try again later")}else{if(g=="parsererror"){alert("Sorry, response is corrupted, please try again later")}else{alert("Error, status: "+g+", please try again later")}}})});function a(c,f){var e=/Date\(([^)]+)\)/;var d=e.exec(c);if(d.length!=2){if(!f){return s}throw new Error(s+" is not .net json date.")}return new Date(parseFloat(d[1]))}})(jQuery);var dateFormat=function(){var b=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,a=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,e=function(d,f){d=String(d);for(f=f||2;d.length<f;){d="0"+d}return d};return function(C,A,w){var y=dateFormat;arguments.length==1&&Object.prototype.toString.call(C)=="[object String]"&&!/\d/.test(C)&&(A=C,C=void 0);C=C?new Date(C):new Date;if(isNaN(C)){throw SyntaxError("invalid date")}A=String(y.masks[A]||A||y.masks["default"]);A.slice(0,4)=="UTC:"&&(A=A.slice(4),w=!0);var B=w?"getUTC":"get",x=C[B+"Date"](),t=C[B+"Day"](),v=C[B+"Month"](),r=C[B+"FullYear"](),z=C[B+"Hours"](),k=C[B+"Minutes"](),j=C[B+"Seconds"](),B=C[B+"Milliseconds"](),u=w?0:C.getTimezoneOffset(),d={d:x,dd:e(x),ddd:y.i18n.dayNames[t],dddd:y.i18n.dayNames[t+7],m:v+1,mm:e(v+1),mmm:y.i18n.monthNames[v],mmmm:y.i18n.monthNames[v+12],yy:String(r).slice(2),yyyy:r,h:z%12||12,hh:e(z%12||12),H:z,HH:e(z),M:k,MM:e(k),s:j,ss:e(j),l:e(B,3),L:e(B>99?Math.round(B/10):B),t:z<12?"a":"p",tt:z<12?"am":"pm",T:z<12?"A":"P",TT:z<12?"AM":"PM",Z:w?"UTC":(String(C).match(a)||[""]).pop().replace(c,""),o:(u>0?"-":"+")+e(Math.floor(Math.abs(u)/60)*100+Math.abs(u)%60,4),S:["th","st","nd","rd"][x%10>3?0:(x%100-x%10!=10)*x%10]};return A.replace(b,function(f){return f in d?d[f]:f.slice(1,f.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(b,a){return dateFormat(this,b,a)};